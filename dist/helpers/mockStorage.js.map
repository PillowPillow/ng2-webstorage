{"version":3,"file":"mockStorage.js","sourceRoot":"","sources":["../../lib/helpers/mockStorage.ts"],"names":[],"mappings":"AAGA;IAAA;IAwDA,CAAC;IAnDO,gCAAc,GAArB,UAAsB,KAAK;QAC1B,MAAM,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,aAAa,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;IAC1D,CAAC;IAEM,4BAAU,GAAjB,UAAkB,KAAc;QAC/B,EAAE,CAAA,CAAC,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;YAC5B,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,GAAG,iBAAiB,CAAC,eAAe,EAAE,CAAC;QAEhE,MAAM,CAAC,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,CAAC;IACjC,CAAC;IAEM,iCAAe,GAAtB;QACC,IAAI,OAAO,GAAgB,EAAE,CAAC;QAE9B,MAAM,CAAC,gBAAgB,CAAC,OAAO,EAAE;YAChC,OAAO,EAAE;gBACR,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,KAAK;gBACnB,KAAK,EAAE,UAAS,GAAG,EAAE,KAAK;oBACzB,EAAE,CAAA,CAAC,CAAC,iBAAiB,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;wBAAC,IAAI,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;gBAC9D,CAAC;aACD;YACD,OAAO,EAAE;gBACR,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,KAAK;gBACnB,KAAK,EAAE,UAAS,GAAG;oBAClB,MAAM,CAAC,CAAC,iBAAiB,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC,GAAG,CAAC,IAAI,IAAI,GAAG,IAAI,CAAC;gBAC1E,CAAC;aACD;YACD,UAAU,EAAE;gBACX,QAAQ,EAAE,KAAK;gBACf,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,KAAK;gBACnB,KAAK,EAAE,UAAS,GAAG;oBAClB,EAAE,CAAA,CAAC,CAAC,iBAAiB,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;wBAAC,OAAO,IAAI,CAAC,GAAG,CAAC,CAAC;gBAC7D,CAAC;aACD;YACD,MAAM,EAAE;gBACP,UAAU,EAAE,KAAK;gBACjB,YAAY,EAAE,KAAK;gBACnB,GAAG;oBACF,MAAM,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC;gBACjC,CAAC;aACD;SACD,CAAC,CAAC;QAEH,MAAM,CAAC,OAAO,CAAC;IAChB,CAAC;IApDM,+BAAa,GAAG,CAAC,SAAS,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,CAAC,CAAC;IAC/D,8BAAY,GAAG,EAAE,CAAC;IAqD1B,wBAAC;AAAD,CAAC,AAxDD,IAwDC","sourcesContent":["import {IWebStorage} from '../interfaces/webStorage';\nimport {STORAGE} from '../enums/storage';\n\nexport class MockStorageHelper {\n\n\tstatic securedFields = ['setItem', 'getItem', 'removeItem', 'length'];\n\tstatic mockStorages = {};\n\n\tstatic isSecuredField(field) {\n\t\treturn !!~MockStorageHelper.securedFields.indexOf(field);\n\t}\n\n\tstatic getStorage(sType: STORAGE): IWebStorage {\n\t\tif(!this.mockStorages[sType])\n\t\t\tthis.mockStorages[sType] = MockStorageHelper.generateStorage();\n\n\t\treturn this.mockStorages[sType];\n\t}\n\n\tstatic generateStorage(): IWebStorage {\n\t\tlet storage = <IWebStorage>{};\n\n\t\tObject.defineProperties(storage, {\n\t\t\tsetItem: {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: false,\n\t\t\t\tvalue: function(key, value) {\n\t\t\t\t\tif(!MockStorageHelper.isSecuredField(key)) this[key] = value;\n\t\t\t\t},\n\t\t\t},\n\t\t\tgetItem: {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: false,\n\t\t\t\tvalue: function(key) {\n\t\t\t\t\treturn !MockStorageHelper.isSecuredField(key) ? this[key] || null : null;\n\t\t\t\t},\n\t\t\t},\n\t\t\tremoveItem: {\n\t\t\t\twritable: false,\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: false,\n\t\t\t\tvalue: function(key) {\n\t\t\t\t\tif(!MockStorageHelper.isSecuredField(key)) delete this[key];\n\t\t\t\t},\n\t\t\t},\n\t\t\tlength: {\n\t\t\t\tenumerable: false,\n\t\t\t\tconfigurable: false,\n\t\t\t\tget() {\n\t\t\t\t\treturn Object.keys(this).length;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn storage;\n\t}\n\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}