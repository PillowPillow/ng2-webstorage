{"version":3,"sources":["../lib/app.ts"],"names":[],"mappings":"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","file":"app.js","sourceRoot":"","sourcesContent":["import {NgModule, NgZone, ModuleWithProviders, OpaqueToken, Inject, Optional} from '@angular/core';\r\nimport {LIB_KEY, LIB_KEY_SEPARATOR, LIB_KEY_CASE_SENSITIVE} from './constants/lib';\r\nimport {STORAGE} from './enums/storage';\r\nimport {LocalStorageService, SessionStorageService} from './services/index';\r\nimport {WebStorageHelper} from './helpers/webStorage';\r\nimport {WebstorageConfig, IWebstorageConfig} from './interfaces/config';\r\nimport {KeyStorageHelper} from './helpers/keyStorage';\r\n\r\nexport * from './interfaces/index';\r\nexport * from './decorators/index';\r\nexport * from './services/index';\r\n\r\nexport const WEBSTORAGE_CONFIG = new OpaqueToken('WEBSTORAGE_CONFIG');\r\n\r\n\r\nexport class Ng2Webstorage {\r\n\r\n\tstatic forRoot(config?:IWebstorageConfig):ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: Ng2Webstorage,\r\n\t\t\tproviders: [\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: WEBSTORAGE_CONFIG,\r\n\t\t\t\t\tuseValue: config\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: WebstorageConfig,\r\n\t\t\t\t\tuseFactory: provideConfig,\r\n\t\t\t\t\tdeps: [\r\n\t\t\t\t\t\tWEBSTORAGE_CONFIG\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t}\r\n\r\n\tconstructor(private ngZone:NgZone,   config:WebstorageConfig) {\r\n\t\tif(config) {\r\n\t\t\tKeyStorageHelper.setStorageKeyPrefix(config.prefix);\r\n\t\t\tKeyStorageHelper.setStorageKeySeparator(config.separator);\r\n\t\t\tKeyStorageHelper.setCaseSensitivity(config.caseSensitive);\r\n\t\t}\r\n\r\n\t\tthis.initStorageListener();\r\n\t}\r\n\r\n\tprivate initStorageListener() {\r\n\t\tif(typeof window !== 'undefined') {\r\n\t\t\twindow.addEventListener('storage', (event:StorageEvent) => this.ngZone.run(() => {\r\n\t\t\t\tlet storage:STORAGE = window.sessionStorage === event.storageArea ? STORAGE.session : STORAGE.local;\r\n\t\t\t\tWebStorageHelper.refresh(storage, event.key);\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\r\n\tdeclarations: [],\r\n\tproviders: [SessionStorageService, LocalStorageService],\r\n\timports: []\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NgZone, },\n{type: WebstorageConfig, decorators: [{ type: Optional }, { type: Inject, args: [WebstorageConfig, ] }, ]},\n];\n}\r\n\r\nexport function provideConfig(config:IWebstorageConfig):WebstorageConfig {\r\n\treturn new WebstorageConfig(config);\r\n}\r\n\r\nexport function configure({prefix, separator, caseSensitive}:IWebstorageConfig = {\r\n\tcaseSensitive: LIB_KEY_CASE_SENSITIVE,\r\n\tprefix: LIB_KEY,\r\n\tseparator: LIB_KEY_SEPARATOR\r\n}) {\r\n\t/*@Deprecation*/\r\n\tconsole.warn('[ng2-webstorage:deprecation] The configure method is deprecated since the v1.5.0, consider to use forRoot instead');\r\n\r\n\tKeyStorageHelper.setStorageKeyPrefix(prefix);\r\n\tKeyStorageHelper.setStorageKeySeparator(separator);\r\n\tKeyStorageHelper.setCaseSensitivity(caseSensitive);\r\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}