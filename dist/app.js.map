{"version":3,"file":"app.js","sourceRoot":"","sources":["../lib/app.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule, NgZone, ModuleWithProviders, OpaqueToken, Inject, Optional} from '@angular/core';\r\nimport {LIB_KEY, LIB_KEY_SEPARATOR} from './constants/lib';\r\nimport {STORAGE} from './enums/storage';\r\nimport {LocalStorageService, SessionStorageService} from './services/index';\r\nimport {WebStorageHelper} from './helpers/webStorage';\r\nimport {WebstorageConfig, IWebstorageConfig} from './interfaces/config';\r\nimport {KeyStorageHelper} from './helpers/keyStorage';\r\n\r\nexport * from './interfaces/index';\r\nexport * from './decorators/index';\r\nexport * from './services/index';\r\n\r\nexport const WEBSTORAGE_CONFIG = new OpaqueToken('WEBSTORAGE_CONFIG');\r\n\r\n\r\nexport class Ng2Webstorage {\r\n\r\n\tstatic forRoot(config?: IWebstorageConfig):ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: Ng2Webstorage,\r\n\t\t\tproviders: [\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: WEBSTORAGE_CONFIG,\r\n\t\t\t\t\tuseValue: config\r\n\t\t\t\t},\r\n\t\t\t\t{\r\n\t\t\t\t\tprovide: WebstorageConfig,\r\n\t\t\t\t\tuseFactory: provideConfig,\r\n\t\t\t\t\tdeps: [\r\n\t\t\t\t\t\tWEBSTORAGE_CONFIG\r\n\t\t\t\t\t]\r\n\t\t\t\t}\r\n\t\t\t]\r\n\t\t};\r\n\t}\r\n\r\n\tconstructor(private ngZone:NgZone,   config:WebstorageConfig) {\r\n\t\tif(config) {\r\n\t\t\tKeyStorageHelper.setStorageKeyPrefix(config.prefix);\r\n\t\t\tKeyStorageHelper.setStorageKeySeparator(config.separator);\r\n\t\t}\r\n\r\n\t\tthis.initStorageListener();\r\n\t}\r\n\r\n\tprivate initStorageListener() {\r\n\t\tif(window) {\r\n\t\t\twindow.addEventListener('storage', (event:StorageEvent) => this.ngZone.run(() => {\r\n\t\t\t\tlet storage:STORAGE = window.sessionStorage === event.storageArea ? STORAGE.session : STORAGE.local;\r\n\t\t\t\tWebStorageHelper.refresh(storage, event.key);\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\r\n\tdeclarations: [],\r\n\tproviders: [SessionStorageService, LocalStorageService],\r\n\timports: []\r\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NgZone, },\n{type: WebstorageConfig, decorators: [{ type: Optional }, { type: Inject, args: [WebstorageConfig, ] }, ]},\n];\n}\r\n\r\nexport function provideConfig(config: IWebstorageConfig): WebstorageConfig {\r\n\treturn new WebstorageConfig(config);\r\n}\r\n\r\nexport function configure({prefix, separator}:IWebstorageConfig = {prefix: LIB_KEY, separator: LIB_KEY_SEPARATOR}) {\r\n\t/*@Deprecation*/\r\n\tconsole.warn('[ng2-webstorage:deprecation] The configure method is deprecated since the v1.5.0, consider to use forRoot instead');\r\n\r\n\tKeyStorageHelper.setStorageKeyPrefix(prefix);\r\n\tKeyStorageHelper.setStorageKeySeparator(separator);\r\n}\r\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}