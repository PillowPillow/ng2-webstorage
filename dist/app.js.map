{"version":3,"file":"app.js","sourceRoot":"","sources":["../lib/app.ts"],"names":[],"mappings":"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","sourcesContent":["import {NgModule, NgZone, ModuleWithProviders, OpaqueToken, Inject, Optional} from '@angular/core';\nimport {LIB_KEY, LIB_KEY_SEPARATOR} from './constants/lib';\nimport {STORAGE} from './enums/storage';\nimport {LocalStorageService, SessionStorageService} from './services/index';\nimport {WebStorageHelper} from './helpers/webStorage';\nimport {WebstorageConfig, IWebstorageConfig} from './interfaces/config';\nimport {KeyStorageHelper} from './helpers/keyStorage';\n\nexport * from './interfaces/index';\nexport * from './decorators/index';\nexport * from './services/index';\nexport * from './helpers/keyStorage';\n\n\nexport const WEBSTORAGE_CONFIG = new OpaqueToken('WEBSTORAGE_CONFIG');\n\n\nexport class Ng2Webstorage {\n\n\tstatic forRoot(config?: IWebstorageConfig):ModuleWithProviders {\n\t\treturn {\n\t\t\tngModule: Ng2Webstorage,\n\t\t\tproviders: [\n\t\t\t\t{\n\t\t\t\t\tprovide: WEBSTORAGE_CONFIG,\n\t\t\t\t\tuseValue: config\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tprovide: WebstorageConfig,\n\t\t\t\t\tuseFactory: provideConfig,\n\t\t\t\t\tdeps: [\n\t\t\t\t\t\tWEBSTORAGE_CONFIG\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\t}\n\n\tconstructor(private ngZone:NgZone,   config:WebstorageConfig) {\n\t\tif(config) {\n\t\t\tKeyStorageHelper.setStorageKeyPrefix(config.prefix);\n\t\t\tKeyStorageHelper.setStorageKeySeparator(config.separator);\n\t\t}\n\n\t\tthis.initStorageListener();\n\t}\n\n\tprivate initStorageListener() {\n\t\tif(window) {\n\t\t\twindow.addEventListener('storage', (event:StorageEvent) => this.ngZone.run(() => {\n\t\t\t\tlet storage:STORAGE = window.sessionStorage === event.storageArea ? STORAGE.session : STORAGE.local;\n\t\t\t\tWebStorageHelper.refresh(storage, event.key);\n\t\t\t}));\n\t\t}\n\t}\nstatic decorators: DecoratorInvocation[] = [\n{ type: NgModule, args: [{\n\tdeclarations: [],\n\tproviders: [SessionStorageService, LocalStorageService],\n\timports: []\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: NgZone, },\n{type: WebstorageConfig, decorators: [{ type: Optional }, { type: Inject, args: [WebstorageConfig, ] }, ]},\n];\n}\n\nexport function provideConfig(config: IWebstorageConfig): WebstorageConfig {\n\treturn new WebstorageConfig(config);\n}\n\nexport function configure({prefix, separator}:IWebstorageConfig = {prefix: LIB_KEY, separator: LIB_KEY_SEPARATOR}) {\n\t/*@Deprecation*/\n\tconsole.warn('[ng2-webstorage:deprecation] The configure method is deprecated since the v1.5.0, consider to use forRoot instead');\n\n\tKeyStorageHelper.setStorageKeyPrefix(prefix);\n\tKeyStorageHelper.setStorageKeySeparator(separator);\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}